# GitWork

## キーワード
### ◆SSHキー
+ リポジトリにアクセスするための、SSHを利用した公開鍵と秘密鍵のこと
### ◆リポジトリ
+ 情報が保存されているデータベースのこと
+ ファイルやディレクトリの状態を記録する場所
### ◆ローカルリポジトリ
+ リモートリポジトリに送るためのコミットを記録する場所
### ◆リモートリポジトリ
+ 複数人で共有するためのリポジトリ
### ◆コミット
+ ワーキングツリーにある管理対象の全てのファイルのその時点の状態を記録する
###　◆ワークツリー(もしくは、ワーキングツリー)
+ .gitディレクトリが追加されてGitの管理下に置かれたディレクトリのこと
### ◆インデックス
+ リポジトリにコミットをする前の一時領域
+ 作業ツリーの内容のある時点の記録を保持する
+ git addコマンドでファイルをここに登録して、git commitでここに登録されているファイルをリポジトリにコミットする
### ◆ステージング
+ インデックスに登録すること
### ◆ブランチ
+ 作業の流れを分岐して記録していくためのもの
+ 分岐したブランチは他のブランチの影響を受けない
+ 別々の作業を並行して行うために利用する
### ◆統合ブランチ
+ リリース版がいつでも作成可能な要しておくためのブランチ
+ トピックブランチの分岐点であり、そのため、安定した状態を保っておくことが重要
### ◆トピックブランチ
+ 一つのトピック(テーマ)に集中して、他の作業は一切行わないブランチのこと
+ トピックブランチのトピックとされるものは、機能追加やバグ修正といった課題となる
+ 課題の数だけトピックブランチを作る
+ 作業が完了したら統合ブランチに取り込む
### ◆マージ
+ ブランチに別のブランチの変更を取り込むこと
### ◆fast-forward
+ コミットAとコミットBがあるとき、コミットAの歴史がコミットBの歴史に全て含まれて入る場合、fast-forwardである。
### ◆マージコミット
+ マージした際に生じた変更を取り込んだコミット
+ マージ先ブランチ(統合ブランチ)の先頭はマージコミットになる
### ◆HEAD
+ 現在使用しているブランチの先頭を表す名前
### ◆コンフリクト
+ マージをした時にブランチの変更部分で衝突が起きたこと(同じ場所で別の変更を行う)
### ◆ガベージコレクション
+ プログラムが動的に確保したメモリ領域のうち、不要になった領域を自動的に解放する機能

## 基本的な操作
### ◆git init
+ リポジトリの初期化
+ フォルダに.gitフォルダを追加し、追加されたフォルダ以下をワークツリーと呼ぶ
### ◆git status
+ リポジトリの状態を確認
### ◆git add
+ ワーキングツリーにあるファイルをインデックスに登録してGitの管理対象にする
+ インデックスに追加されたファイルはコミットされる準備をする
+ ignoreファイル(無視ファイル)は追加できない
+ 通常は、パスの内容を追加する
    ### . オプション
     + git管理下のファイル全部をインデックスに登録する
    ### --allオプション
     + 変更が加えられたファイルと未追跡だった(新しく作った等)だったファイルをインデックスに追加
    ### -fオプション
     + ファイルを強制的にインデックスに登録する。ignoreファイルを登録することができる。
### ◆git commit
+ 変更内容を説明するメッセージとともにインデックスの現在の内容を記録する
+ 記録する方法いくつかありは、「インデックスに登録されたファイル」「git rmコマンドで削除されたファイル」「commitコマンドの引数としてリストした場合、変更内容を無視して現在の内容を記録」「-aで登録と同時にワーキングツリーから削除する」がある
+ リポジトリの歴史を記録
+ インデックスに登録されている時点のファイル群を実際にリポジトリの歴史として記録する
+ 記録した歴史を元に、ファイルをワーキングツリーに復元したりできる
    ### -mオプション
     + コミットに関する要約を書く
     + -mオプションをつけないでそのままコミットすると、エディタが立ち上がり、コミットに関する詳細なメッセージが書ける
    ### --amendオプション
     + 直前のコミットメッセージを修正する
    ### --amオプション
     + 変更、削除されたファイルを自動的にステージングするが、Gitに伝えていない新しいファイルは影響を受けない
### ◆git push
+ 現在のローカルリポジトリの内容でリモートリポジトリを更新する
+ リポジトリを引数で指定していない場合は、現在のブランチのブランチリモート構成を参照してプッシュ先を決定し、設定がない場合、デフォルトはoriginになります
+ refspec argumentsまたは、--all, -mirror, --tagsオプションを使用してプッシュするものが指定されていない場合は、コマンドはリモートプッシュ設定を参照してデフォルトのrefspecを検索し、見つからなかった場合、プッシュするものを決めるためにpush.default設定を与える
+ コマンドラインも構成もプッシュするものを指定していないときは、push.defaultの値に対応するデフォルトの動作が使用される。
    ### -f | --foure
     + 強制的にプッシュする
    ### git push [ローカルブランチ名]
     + 指定のローカルブランチを同名のリモートブランチにpushする
     + git push master は git push master : master の省略
    ### git push [ローカルブランチ名] : [リモートブランチ名]
     + 指定のローカルブランチを指定のリモートブランチにpushする
    ### git push -u [ローカルブランチ名] : [リモートブランチ名]
     + -uオプションは、指定のローカルブランチは指定もリモートブランチと同一であるという意味を同時に行う(ブランチリモート構成の登録)
    ### git push -u [リモート名(origin)] [ローカルブランチ名]
     + ローカルブランチ名と同じブランチをリポジトリに作って、pushする
    ### (refspec) +<src>:ref<dst>
     + どの送り先参照をどのソースオブジェクトで更新するかを指定する
### ◆git clone [リモートリポジトリのあるアドレス]
+ リモートリポジトリを取得する
+ 取得したリポジトリは新しく作成したディレクトリに入る
+ このコマンドを実施した直後の状態だとmasterブランチになっている
+ リモートリポジトリをoriginで識別できるようになっている
+ クローンしたリポジトリは元々のリポジトリの変更履歴も複製されるため、クローン元と同じように履歴の参照やコミットをすることができる

### ◆git fetch
+ 最新のリポジトリのデータを取得する
+ リモートが指定されていない場合は、現在のブランチにアップストリームブランチが設定されていない限り、デフォルトのリモートが使用される


### ◆git log
+ 『現在の状態の過去』を確認できる
+ 誰が、いつ、どのような差分が発生するコミットやマージをしたかが確認できる
<img width="347" alt="2017-05-24 13 25 01" src="https://cloud.githubusercontent.com/assets/7357884/26386945/e20d784e-4084-11e7-930d-2c44cab917ff.png">

   ### ログの見方
 + 上記画像の黄色い部分、「commit ....」に続く文字列がハッシュ値。Gitの他のコマンドでこのコミットを指し示す際に利用する。
 + Author　ではGitで設定されているユーザ名とメールアドレスが記録されている
 + Dateにはコミットを実施した日時が記録されている
   ### --pretty=shorオプション
 + コミットメッセージの一行目のみを表示する
   ### git log [ファイル名]
 + 指定したディレクトリ、ファイルのみのログを表示する
   ### -pオプション
 + ファイルの差分を表示する
   ### git log --graph
 + ブランチを視覚的に確認する

### ◆git reflog
+ リポジトリにコミットされたログを確認できる
+ Gitのガベージコレクションが行われない限り、このコマンドである程度の過去と未来を行き来できる

### git diff
+ ワークツリー、インデックス、最新コミット間の差分を確認する
+ インデックスに追加していない場合は、最新コミットとの差分として表示
    ### git diff HEAD
    + ワークツリーと最新コミットの差分を確認する
### git branch
+ ローカルリポジトリのブランチを一覧表示
+ 表示されたブランチ名の中で、「\*名前」となっているブランチが現在のブランチ
    ### -aオプション
    + ローカルリポジトリとリモートリポジトリの両方のブランチの情報を表示する
    ### -D [削除するブランチ名]
    + ブランチを削除する
### git checkout [ブランチ名]
+ 指定のブランチ名のブランチに切り替える
+ ブランチを切り替える際には、インデックスまたは、指定されたツリーのバージョンにワーキングツリーのファイルを更新する
+ パスが指定されない場合、HEADを更新する
  ### -オプション
   + 前回のブランチに切り替える
  ### -b [新しいローカルブランチ名]
   + 新しいブランチを作成し、切り替える
  ### -b [新しいローカルブランチ名] [リモート名(origin)]/[新しいリモートブランチ名]　オプション
   + ローカルとリモートのリポジトリに新しいブランチを追加して切り替える


### git merge --no-ff [現在のブランチにマージするブランチ名]
+ 現在のブランチに指定の名前のブランチをマージ(取り込む)すること
+ ブランチを取り込む際には、変更履歴も一緒に取り込む
    ### --ffオプション
     + マージ対象のブランチとfast-forwardの関係にある場合、マージコミットは作られず、ブランチの参照先の更新だけを行う
     + fast-forwardの関係にない場合はマージコミットが作られる
    ### --no-ffオプション
     + fast-forwardの関係であっても、必ずマージコミットを作る
    ### --squashオプション
     + ワークツリーとインデックスの状態はマージ後の状態になるが、マージコミットは作らない

### git reset
+ HEADの位置を変更する
+ オプションによってインデックス、ワーキングツリーの内容も変更できる
    ### --hard [戻りたいコミットのハッシュ値]
     + HEADの位置とインデックス、ワーキングツリーを変更して完全に復元する
    ### --soft [ハッシュ値]
     + HEAD の位置のみを変更する
    ### --mixied [ハッシュ値]
     + HEADの位置とインデックスを変更する
### git rebase -i HEAD~[HEADから修正するコミットまでの数]
+ すでにコミットした内容にちょっとしたスペルミスなどが発見されたら修正のコミットをし、そのコミットを正しく実装したコミットに含めて歴史そのものを押しつぶして改変する
+ ブランチが指定されている場合は、自動的に「git checkout」を実行している
+ -iオプションは、リベースをする前にリストの編集ができるようにしている
+ -iオプションを使ってコマンドを打つと出てくるエディタにある、HEADのハッシュ値と修正するコミットのハッシュ値の左の「pick」というコマンドを「fixup」に書き換える
+ コマンドの種類は下記の通り
```
    #  p, pick = use commit
    #  r, reword = use commit, but edit the commit message
    #  e, edit = use commit, but stop for amending
    #  s, squash = use commit, but meld into previous commit
    #  f, fixup = like "squash", but discard this commit's log message
    #  x, exec = run command (the rest of the line) using shell
```
+ このコマンドで「It seems that there is already a rebase-merge directory ~~~~~~~」というようなエラーが出る場合は、やりかけのrebaseがあるという警告である。 やりかけを無くして作業を続行するならrmコマンドでやりかけを消す。やりかけを完結させるなら--continueオプションを使う

+ git rebase --onto [統合ブランチ] [統合ブランチの分岐Aブランチ] [分岐Aの分岐Bブランチ]というコマンドを打てば、Aブランチに依存しているBブランチを統合ブランチからの分岐に変更できる

### git remote
+ 現在のブランチを追跡しているリモートを管理
    ### add [リモート名] [リポジトリ保存場所(Github)]
     + urlのリポジトリにリモートの名前を追加する
+ リモート名+ブランチ名で識別(例：origin[リモート名]-master[ブランチ名])
### git pull
+ 最新のリモートリポジトリを取得

# さらに理解が深まる資料
+ Pro Git : Github社に勤めているScott Chacon氏によって執筆されたGitを基本から学ぶことのできる資料。CC3なため、日本語訳なども無料で観れる
+ LearnGitBranching :Gitの基本的な操作が学べるサイト
+ tryGit : Web上で操作しながらGitを学ぶことができる
